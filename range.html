<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Range + Editable Span</title>
  <style>
    .editable-span {
      display: inline-block;
      padding: 3px 6px;
      //border: 1px solid #ccc;
      border-radius: 4px;
      min-width: 30px;
      text-align: center;
      cursor: pointer;
    }
    .editable-span[contenteditable="true"] {
      outline: none;
      /*background: #f5f5f5;*/
    }
  </style>
</head>
<body>
  <input type="range" id="range" min="3000" max="100000" value="50000">
  <span id="value" class="editable-span" contenteditable="false">50000</span>

  <script>
    const range = document.getElementById("range");
    const valueSpan = document.getElementById("value");

    // Keep span synced with range
    range.addEventListener("input", () => {
      valueSpan.textContent = range.value;
    });

    // Click span to make editable
    valueSpan.addEventListener("click", () => {
      valueSpan.setAttribute("contenteditable", "true");
      valueSpan.focus();
    });

    // When user finishes editing
    const finishEdit = () => {
      let newValue = parseInt(valueSpan.textContent, 10);

      // If not a number, fallback
      if (isNaN(newValue)) newValue = range.value;

      // Clamp value between min and max
      newValue = Math.min(Math.max(newValue, range.min), range.max);

      range.value = newValue;
      valueSpan.textContent = newValue;
      valueSpan.setAttribute("contenteditable", "false");
    };

    // Blur or Enter confirms value
    valueSpan.addEventListener("blur", finishEdit);
    valueSpan.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault(); // prevent line break
        finishEdit();
      }
      if (e.key === "Escape") {
        valueSpan.textContent = range.value;
        valueSpan.setAttribute("contenteditable", "false");
	  }
    });
</script>
</body>
</html>
